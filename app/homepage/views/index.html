<div ng-controller="IndexController" class="page">
  <link rel="stylesheet" href="styles/index.css">

  <super-navbar>
    <super-navbar-title>
      DormIt
    </super-navbar-title>
  </super-navbar>

  <div class="searchbar item item-input-inset">
    <label class="item-input-wrapper">
      <input ng-model="query.name" type="text" placeholder="Dorm Name">
    </label>
    <button type="button" class="button button-clear" data-toggle="collapse" data-target="#demo" ng-class="chevron" ng-click="switchButton()">
    </button>
  </div>

  <div id="demo" class="collapse">
    <ul>
      <li class="choice item item-checkbox">
        <strong>Location</strong>:
        <input type="checkbox" ng-model="queryLoc['North']"> North
        <input type="checkbox" ng-model="queryLoc['South']"> South
      </li>

      <li class="choice item item-checkbox">
        <strong>Size</strong>:
        <input type="checkbox" ng-model="querySize['Small']"> Small
        <input type="checkbox" ng-model="querySize['Large']"> Large
      </li>

      <li class="choice item item-checkbox">
        <strong>Type</strong>:
        <input type="checkbox" ng-model="queryType['Residence Hall']"> Residence Hall
        <input type="checkbox" ng-model="queryType['Residential College']"> Residential College
      </li>

      <li>
        <div>
          <div class="item range range-light">
            <strong>Stars</strong>{{": "}}
            <div><span ng-bind="queryStar"></span></div>
            <input type="range" step="0.1" min="0" max="5" ng-model="queryStar">5
          </div>
        </div>
      </li>

      <li class="choice item">
        <Strong>Sort:</Strong>
        <button class="sortButton" ng-class="{active:isSet(1)}" ng-click="sortByPrice()">
          <div>Price</div>
        </button>
        <button class="sortButton" ng-class="{active:isSet(2)}" ng-click="sortByRating()">
          <div>Rating</div>
        </button>
      </li>

    </ul>
  </div>

  <ul>
    <li>
      <super-navigate ng-repeat="dorm in (filtered= (dormList|filter:query|filter:filterByLoc|filter:filterBySize|filter:filterByType|filter:filterByStar))" class="item item-thumbnail-left" view-id="dormPage#dorm?id={{dorm.id}}">
        <img ng-src="{{dorm.img}}">
        <h2 class="name">{{dorm.name}}</h2>
        <p class="type">{{dorm.size}} | {{dorm.price | currency:$:0}}/quarter</p>
        <p class="type">{{dorm.location}} | {{dorm.type}}</p>
        <div static-star-rating rating-value="dorm.star" max=5></div>
      </super-navigate>
    </li>
  </ul>

  <div class="nofound" ng-show="filtered.length === 0">
    <h4>Oops! No dorms found...</h4>
    <img src="http://www.polyvore.com/cgi/img-thing?.out=jpg&size=l&tid=9374089" width = "100">
  </div>
</div>

<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script src="http://libs.baidu.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
<link href="http://libs.baidu.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet">
